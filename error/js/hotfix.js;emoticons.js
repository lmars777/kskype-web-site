$(function(){if(navigator.userAgent.match(/Trident/i)){var matches=navigator.userAgent.match(/Windows NT (\d.\d);/i);if(matches&&matches.length>=1&&matches[1]>=6.3){$(".messageBox").removeAttr("role");$(".errorWrap").removeAttr("role");}}
var msgBox=$(".messageBox:visible");if(msgBox.length){window.setTimeout(function(){msgBox.append("&#8203;");},3000);}});if(typeof SKYPE==="undefined"){var SKYPE={};}
if(typeof SKYPE.emoticons==="undefined"){SKYPE.emoticons={};}
SKYPE.emoticons.animate=function(){var _animations=[],_firstmap={"cool":19,"crying":36,"facepalm":66,"fingerscrossed":5,"itwasntme":18,"nerd":1,"ninja":19,"tumbleweed":1},_initialized=false,_ticker=null,_emo_size="",_findEmoticons=function(){_animations=[];var emoticons=$(".emoticon");for(var i=0;i<emoticons.length;++i){var emo=$(emoticons[i]),pos_x=0,emo_name=emo.attr("data-emoticon-name"),_emo_size=emo.attr("data-size"),emo_mode=emo.attr("data-mode"),emo_align=emo.attr("data-align");if(emo_align==="left"){pos_x="0%";}else if(emo_align==="right"){pos_x="100%";}else{pos_x="50%";}
if(SKYPE.ResponsiveState.calculateCurrentState()==="mobile"){var emo_default=_getPath(emo_name,"80","static");emo.css("background-image","url("+emo_default+")");emo.css("background-position",pos_x+" 0");emo.removeClass("emo-160").addClass("emo-80");continue;}else{var emo_default=_getPath(emo_name,_emo_size,"static");emo.css("background-image","url("+emo_default+")");}
var emo_path=_getPath(emo_name,_emo_size,emo_mode);_findDimensions(emo_path,emo,_emo_size,emo_mode,pos_x,_firstmap[emo_name]);}},_getPath=function(emo_name,emo_size,emo_mode){var ext="png";return SKYPE.emoticons.path+"/"+emo_mode+"/"+emo_size+"/"+emo_name+"_"+emo_size+"."+ext;},_stopAnimation=function(){clearInterval(_ticker);_ticker=null;},_startAnimation=function(){_findEmoticons();if(_ticker===null){_ticker=window.setInterval(function(){for(var i=0;i<_animations.length;i++){if(_animations[i].emo_mode==="animated"){var new_pos_y=_animations[i].pos_y-_animations[i].emo_size;if(Math.abs(new_pos_y)>=_animations[i].emo_height){new_pos_y=0;}
_animations[i].pos_y=new_pos_y;_animations[i].emo.css("background-position",_animations[i].pos_x+" "+new_pos_y+"px");}}},1000 / 24);}},_findDimensions=function(emo_path,emoticon,emo_size,emo_mode,pos_x,first_frame){var emo_image=new Image();emo_image.name=emo_path;emo_image.src=emo_path;emo_image.onload=function(){emoticon.css("background-image","url("+emo_path+")");_animations.push({emo_path:emo_path,emo_size:emo_size,emo_mode:emo_mode,emo:emoticon,pos_y:-Math.abs((first_frame*_emo_size)-_emo_size),pos_x:pos_x,emo_height:this.height,start_anim:true});};},_init=function(){SKYPE.ResponsiveState.init();if(!_initialized){$(document).ready(_startAnimation);_initialized=true;}else{_startAnimation();}
$(window).on("responsiveStateChange",function(e){if(e.state==="mobile"){_stopAnimation();SKYPE.emoticons.animate.findEmoticons();}else{_startAnimation();var emos=$(".emoticon");emos.removeClass("emo-160").removeClass("emo-80").addClass("emo-"+emos.attr("data-size"));}});};return{init:_init,startAnimation:_startAnimation,findEmoticons:_findEmoticons};}();SKYPE.emoticons.animate.init();